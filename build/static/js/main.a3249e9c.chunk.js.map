{"version":3,"sources":["utils/axios.js","components/Poster/Alternate.js","components/Home/Banner.js","utils/supabase.js","components/Poster/Poster.js","components/Home/Row.js","components/Home/Rows.js","components/Home/Home.js","components/Auth/SignInGoogle.js","components/Navbar/SignIn.js","components/Navbar/Nav.js","components/SearchPage/Search.js","context/Context.js","components/Poster/BigPoster.js","components/Audiobook/MediaPlayer.js","components/Audiobook/Section.js","components/Audiobook/Audiobook.js","utils/axiosRecommendation.js","components/Recommendation/Row.js","components/Recommendation/Rows.js","components/Recommendation/Recommendation.js","App.js","index.js"],"names":["backend","axios","create","baseURL","Alternate","_ref","parentClass","message","_jsx","className","children","Banner","str","n","quoteQuery","useQuery","queryKey","queryFn","_fetchQuote","apply","arguments","isError","isLoading","_asyncToGenerator","_regeneratorRuntime","mark","_callee","request","wrap","_context","prev","next","get","sent","console","log","data","abrupt","stop","_jsxs","style","backgroundSize","backgroundImage","concat","backgroundPosition","backgroundBlendMode","quote","length","substr","author","supabase","createClient","Poster","ebook","navigate","useNavigate","fetchImage","_ref2","id","folder","response","_id","Math","floor","fetch","blob","URL","createObjectURL","_useQuery","url","_handleClick","_callee2","session","_context2","auth","getSession","state","progress","onClick","_x","handleClick","LazyLoadImage","src","alt","title","effect","authors","map","index","first_name","last_name","language","totaltimesecs","secs","hours","minutes","genres","genre","name","copyright_year","Row","_fetchData","ebooks","undefined","items","filter","item","coverImageURL","LazyLoadComponent","NUM_OF_ROWS","Rows","titles","shuffle","arr","i","j","random","tmp","_response$data","languages","periods","rows","_objectSpread","type","period","_toConsumableArray","slice","min","key","firstName","lastName","encodeURIComponent","from","to","_Fragment","Home","SignInGoogle","_SignInGoogle","signInWithOAuth","provider","SignIn","_useState","useState","_useState2","_slicedToArray","user","setUser","_useState3","_useState4","signoutVisible","setSignoutVisible","promptSignIn","_promptSignIn","_promptSignOut","_callee3","_context3","signOut","Cookies","set","useEffect","_getSession","_yield$supabase$auth$","user_metadata","Object","keys","email","onMouseMove","onMouseLeave","picture","onMouseEnter","Nav","show","handleShow","keywords","setKeywords","eventListenerFunc","window","scrollY","addEventListener","removeEventListener","_useState5","_useState6","menuOpen","setMenuOpen","_useState7","_useState8","timer","setTimer","_useState9","_useState10","toggleTimer","setToggleTimer","clearTimeout","leave","setTimeout","placeholder","onChange","event","target","value","onFocus","e","onBlur","Search","books","setBooks","location","useLocation","_fetchEBooks","fetchEBooks","MediaControlContext","createContext","useMediaControlContext","context","useContext","Error","MediaControlProvider","initialMediaControlState","book","isActive","isPlaying","volume","audioRef","useRef","mediaControl","setMediaControl","contextValue","updateBook","newBook","updateIndex","newIndex","updateIsActive","newIsActive","updateIsPlaying","newIsPlaying","updateVolume","newVolume","Provider","BigPoster","_ebook$sections$index","_ebook$authors","_ebook$genres","mediaContext","setIndex","_record","post","record","sections","PlayPauseButton","htmlFor","formatTime","time","seconds","String","padStart","AudioPlayer","_mediaContext$mediaCo","audioElement","setAudioElement","pause","load","play","current","currentTime","setCurrentTime","duration","setDuration","intervalId","setInterval","onloadedmetadata","clearInterval","width","IconContext","size","IoPlayBackOutline","IoPlaySkipBackOutline","IoPlaySkipForwardOutline","IoPlayForwardOutline","autoPlay","ref","listen_url","section","changeSection","Audiobook","_fetchEBook","_location$state","history","back","Section","description","parse","recommendation","_fetchRecommendations","recommendations","watched","watched_books","getRecommendations","_getRecommendations","Promise","all","t0","t1","_x2","Main","Routes","Route","path","element","Recommendation","MediaPlayer","App","queryClient","QueryClient","defaultOptions","queries","enabled","refetchOnMount","refetchOnWindowFocus","refetchIntervalInBackground","refetchOnReconnect","ReactDOM","render","React","StrictMode","QueryClientProvider","client","BrowserRouter","document","getElementById"],"mappings":"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","file":"static/js/main.a3249e9c.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\n// Function to create a request to the tmdb API\r\n// API fetching from themoviedb\r\nconst backend = axios.create({\r\n  baseURL: \"https://telltale-backend-0tqm.onrender.com/\",\r\n});\r\n\r\n// Exporting instance object.Making it available\r\nexport default backend;\r\n","import React from 'react'\r\n\r\nexport default function Alternate({ parentClass, message }) {\r\n    return (\r\n        <div className={parentClass}>\r\n            <div className=\"alternate__container\">\r\n                <div>\r\n                    {message}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport axios from '../../utils/axios'\r\nimport '../../styles/Home/Banner.css'\r\nimport '../../styles/alternate.css'\r\nimport { useQuery } from '@tanstack/react-query'\r\nimport Alternate from \"../Poster/Alternate\";\r\n\r\nconst MAX_QUOTE_LENGTH = 250\r\nconst BACKEND_URL = `https://telltale-backend-0tqm.onrender.com/`\r\n\r\nfunction Banner() {\r\n    const quoteQuery = useQuery({\r\n        queryKey: [\"quote\"],\r\n        queryFn: fetchQuote\r\n\r\n    })\r\n\r\n    if (quoteQuery.isError) {\r\n        return <Alternate parentClass={'banner'} message={'Error...'} />\r\n    }\r\n    if (quoteQuery.isLoading) {\r\n        return <Alternate parentClass={'banner'} message={'Loading...'} />\r\n    }\r\n\r\n    async function fetchQuote() {\r\n        const request = await axios.get(`/query/quote`)\r\n        console.log(request.data)\r\n        return request.data\r\n    }\r\n\r\n    function truncate(str, n) {\r\n        return str?.length > n ? str.substr(0, n - 1) + \"...\" : str;\r\n    }\r\n\r\n    return (\r\n        <header\r\n            className=\"banner\"\r\n            style={{\r\n                backgroundSize: \"cover\",\r\n                backgroundImage: `url(${BACKEND_URL}query/banner)`,\r\n                backgroundPosition: \"center center\",\r\n                backgroundBlendMode: \"difference\"\r\n            }}\r\n        >\r\n            <div className=\"banner__contents\">\r\n\r\n                <div className=\"banner__buttons\">\r\n                    <button className=\"banner__button\">My List</button>\r\n                </div>\r\n\r\n                <h1 className=\"banner__description\">\r\n                    {truncate(quoteQuery.data.quote, MAX_QUOTE_LENGTH)}\r\n                </h1>\r\n                <h1 className=\"banner__title\">\r\n                    - {quoteQuery.data.author}\r\n                </h1>\r\n            </div>\r\n            {/* Empty fade div with bottom fade effect  */}\r\n            <div className=\"banner--fadeBottom\"></div>\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default Banner;\r\n","import { createClient } from '@supabase/supabase-js'\r\nconst supabase = createClient(\"https://klkotatsmplzawrxyuka.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imtsa290YXRzbXBsemF3cnh5dWthIiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODY5NDU3NjgsImV4cCI6MjAwMjUyMTc2OH0.Yo80PXvjszZQyBYA9mDo-M4mUjKXK4s1dsc9DVmHw24\")\r\n\r\nexport default supabase","import { useQuery } from '@tanstack/react-query';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\r\nimport Alternate from './Alternate';\r\nimport '../../styles/Home/Poster.css'\r\nimport supabase from '../../utils/supabase';\r\n\r\nexport default function Poster({ ebook }) {\r\n    const navigate = useNavigate();\r\n\r\n    const fetchImage = async () => {\r\n        const id = ebook._id;\r\n        const folder = Math.floor(id / 1000);\r\n        const response = await fetch(\r\n            `https://raw.githubusercontent.com/Akil003/TaleTell-static-files/main/${folder}/${id}.webp`\r\n        );\r\n        const data = await response.blob();\r\n        return URL.createObjectURL(data);\r\n    };\r\n\r\n    const { data: url, isLoading, isError } = useQuery(['image', ebook], fetchImage);\r\n\r\n    async function handleClick(ebook) {\r\n\r\n        const session = await supabase.auth.getSession()\r\n        console.log('session', session.data)\r\n        const progress = {}\r\n        // if (session.data.session !== null) {\r\n        //     await axiosInteraction.post('/progress/start', { ebookID: ebook._id }, {\r\n        //         headers: {\r\n        //             'x-access-token': session.data.session.access_token\r\n        //         }\r\n        //     }).then((progress) => {\r\n        //         navigate('/audiobook', { state: { ebook, progress: progress.data } });\r\n        //     })\r\n        //         .catch((e) => {\r\n        //             console.log('no progress records')\r\n        //             navigate('/audiobook', { state: { ebook, progress: progress.data } });\r\n\r\n        //         })\r\n        // }\r\n        // else\r\n        \r\n        navigate('/audiobook', { state: { ebook, progress: progress.data } });\r\n\r\n    }\r\n\r\n    if (isLoading) {\r\n        return <Alternate parentClass='row__poster' />\r\n    }\r\n\r\n    if (isError) {\r\n        return <Alternate parentClass='row__poster' />\r\n    }\r\n\r\n    return (\r\n\r\n        <div className={`row__poster`} onClick={() => handleClick(ebook)}>\r\n            <LazyLoadImage className={`poster__image`} src={url} alt={ebook.title} effect='blur' />\r\n            <div className=\"poster__details\">\r\n                <div className=\"poster__title\">{ebook.title}</div>\r\n                <table className=\"poster__labels\">\r\n                    <tbody>\r\n                        <tr>\r\n                            <td>Authors:</td>\r\n                            <td>\r\n                                {ebook.authors && ebook.authors.map((author, index) => (\r\n                                    <div key={index}>{author.first_name} {author.last_name}</div>\r\n                                ))}\r\n                            </td>\r\n                        </tr>\r\n                        {ebook.language && (\r\n                            <tr>\r\n                                <td>Language:</td>\r\n                                <td>{ebook.language}</td>\r\n                            </tr>\r\n                        )}\r\n                        {ebook.totaltimesecs && (\r\n                            <tr>\r\n                                <td>Duration:</td>\r\n                                <td>\r\n                                    {(() => {\r\n                                        const secs = ebook.totaltimesecs;\r\n                                        const hours = Math.floor(secs / 3600);\r\n                                        const minutes = Math.floor((secs - hours * 3600) / 60);\r\n                                        return `${hours} hr ${minutes} mins`;\r\n                                    })()}\r\n                                </td>\r\n                            </tr>\r\n                        )}\r\n                        <tr>\r\n                            <td>Genres:</td>\r\n                            <td>\r\n                                {ebook.genres && ebook.genres.map((genre, index) => (\r\n                                    <div key={index}>{genre.name}</div>\r\n                                ))}\r\n                            </td>\r\n                        </tr>\r\n                        {ebook.copyright_year && (\r\n                            <tr>\r\n                                <td>Copyright year:</td>\r\n                                <td>{ebook.copyright_year}</td>\r\n                            </tr>\r\n                        )}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n\r\n    );\r\n}\r\n","\r\nimport Poster from '../Poster/Poster';\r\nimport axios from '../../utils/axios'\r\nimport React from 'react'\r\nimport { useQuery } from '@tanstack/react-query';\r\nimport Alternate from '../Poster/Alternate';\r\nimport { LazyLoadComponent } from 'react-lazy-load-image-component';\r\nimport \"../../styles/Home/Row.css\"\r\n\r\nfunction Row({ title, url }) {\r\n  const { data: ebooks, isError, isLoading } = useQuery({\r\n    queryKey: [\"title\", url],\r\n    queryFn: fetchData\r\n  })\r\n\r\n  if (isError) {\r\n    return <Alternate parentClass={\"row__posters\"} message={\"Error...\"} />\r\n  }\r\n\r\n  if (isLoading) {\r\n    return <Alternate parentClass={\"row__posters\"} message={undefined} />\r\n  }\r\n\r\n  async function fetchData() {\r\n    const request = await axios.get(url);\r\n    let items = request.data\r\n    items = items.filter(item => item.coverImageURL)\r\n    // console.log(items)\r\n    return items\r\n  }\r\n  return (\r\n    <div className='row'>\r\n      <LazyLoadComponent>\r\n\r\n        <h2 className='row__title'>{title}</h2>\r\n        <div className=\"row__posters\">\r\n          {\r\n            ebooks.map((ebook) => (\r\n              <Poster key={ebook._id} ebook={ebook} />\r\n            ))\r\n          }\r\n        </div>\r\n      </LazyLoadComponent>\r\n\r\n    </div>\r\n\r\n  )\r\n}\r\n\r\nexport default Row","import '../../styles/Home/Row.css'\r\nimport axios from '../../utils/axios'\r\nimport Row from './Row'\r\nimport { useQuery } from '@tanstack/react-query'\r\nimport Alternate from '../Poster/Alternate'\r\n\r\nconst NUM_OF_ROWS = 200\r\n\r\n\r\nexport default function Rows() {\r\n    const { data: titles, isError, isLoading } = useQuery({\r\n        queryKey: [\"titles\"],\r\n        queryFn: fetchData\r\n    })\r\n\r\n\r\n   \r\n\r\n    if (isError) {\r\n        return <Alternate parentClass=\"rows\" message={\"Error...\"} />\r\n    }\r\n    if (isLoading) {\r\n        return <Alternate parentClass=\"rows\" message={\"Loading...\"} />\r\n    }\r\n\r\n    function shuffle(arr) {\r\n        for (let i = arr.length - 1; i > 0; i--) {\r\n            let j = Math.floor(Math.random() * (i + 1))\r\n            let tmp = arr[j];\r\n            arr[j] = arr[i]\r\n            arr[i] = tmp\r\n        }\r\n    }\r\n\r\n    async function fetchData() {\r\n        const response = await axios.get('/query/titles')\r\n        let { authors, genres, languages, periods } = response.data\r\n        authors = authors.map((author) => ({ ...author, type: 'author' }))\r\n        genres = genres.map((genre) => ({ ...genre, type: 'genre' }))\r\n        languages = languages.map((language) => ({ ...language, type: 'language' }))\r\n        periods = periods.map((period) => ({ ...period, type: 'period' }))\r\n\r\n        const rows = [...authors, ...genres, ...languages, ...periods]\r\n        shuffle(rows)\r\n        return rows.slice(0, Math.min(NUM_OF_ROWS, rows.length))\r\n    }\r\n\r\n\r\n    return (\r\n        <div className='rows'>\r\n            {titles.map((title, index) => {\r\n                if (title.type === 'author') {\r\n                    const key = `By ${title._id.firstName} ${title._id.lastName}`\r\n                    return <Row key={index} title={key} url={`/query/author/?firstName=${title._id.firstName}&lastName=${title._id.lastName}`} />\r\n                } else if (title.type === 'language') {\r\n                    const key = `${title._id} Audiobooks`\r\n                    return <Row key={index} title={key} url={`/query/language/?language=${title._id}`} />\r\n                } else if (title.type === 'genre') {\r\n                    const key = `${title._id}`\r\n                    return <Row key={index} title={key} url={`/query/genre/?genre=${encodeURIComponent(title._id)}`} />\r\n                } else if (title.type === 'period') {\r\n                    let key\r\n                    if (title.from !== \"2000\") {\r\n                        key = `From ${title.from} to ${title.to}`\r\n                    }\r\n                    else {\r\n                        key = `${title.from} onwards...`\r\n                    }\r\n                    return <Row key={index} title={key}\r\n                        url={`/query/period/?from=${title.from}&to=${title.to}`} />\r\n                }\r\n                return <></>\r\n            }\r\n            )\r\n            }\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport Banner from './Banner'\r\nimport Rows from './Rows'\r\n\r\nexport default function Home() {\r\n  return (\r\n    <>\r\n        <Banner />\r\n        <Rows />\r\n    </>\r\n  )\r\n}\r\n","export default async function SignInGoogle(supabase) {\r\n        await supabase.auth.signInWithOAuth({\r\n            provider: \"google\"\r\n        })\r\n  }","import React from 'react'\r\nimport { useState, useEffect } from 'react'\r\nimport jwtDecode from 'jwt-decode'\r\nimport '../../styles/Navbar/SignIn.css'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport SignInGoogle from '../Auth/SignInGoogle'\r\nimport supabase from \"../../utils/supabase\"\r\nimport Cookies from 'js-cookie'\r\n\r\n\r\nexport default function SignIn() {\r\n    const [user, setUser] = useState({})\r\n    const [signoutVisible, setSignoutVisible] = useState(false)\r\n\r\n    async function promptSignIn() {\r\n        await SignInGoogle(supabase)\r\n        \r\n        console.log(\"user\", user)\r\n    }\r\n\r\n    async function promptSignOut() {\r\n        await supabase.auth.signOut()\r\n        setUser({})\r\n        console.log('done...')\r\n        Cookies.set('user', '')\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        async function getSession() {\r\n            const { data } = await supabase.auth.getSession();\r\n            let user = {}\r\n            console.log(data)\r\n            if (data.session)\r\n                user = data.session.user.user_metadata\r\n            setUser(user)\r\n            Cookies.set('email', Object.keys(user).length === 0 ? '': user.email)\r\n            \r\n        }\r\n\r\n        getSession()\r\n    }, [])\r\n\r\n    return (\r\n        <>\r\n\r\n            <div className='signin__wrapper'  onMouseMove={() => { setSignoutVisible(true) }} onMouseLeave={() => {setSignoutVisible(false)}}>\r\n                {\r\n                    user && Object.keys(user).length === 0 &&\r\n                    <button id='siginin__button' className=\"signin__button\"\r\n                        onClick={promptSignIn}>\r\n                        Sign In\r\n                    </button>\r\n\r\n                }\r\n                {\r\n                    user && Object.keys(user).length > 0 &&\r\n                    <div className='signout__wrapper'>\r\n                    <button className=\"signin__profile\"\r\n                        style={{\r\n                            backgroundImage: `url(${user.picture})`,\r\n                        }}\r\n                        onClick={promptSignIn}>\r\n\r\n                    </button> \r\n                    \r\n                    <button className={`signout__button ${signoutVisible ? 'signout__visible' : ''}` }\r\n                        onClick={promptSignOut}\r\n                        onMouseEnter={() => {setSignoutVisible(true)}}\r\n                        onMouseLeave={() => {setSignoutVisible(false)}}\r\n                        >\r\n                            Sign Out\r\n                    </button>\r\n                    </div>\r\n\r\n                }\r\n            </div>\r\n\r\n\r\n        </>\r\n    )\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport \"../../styles/Navbar/Nav.css\";\r\nimport \"@fortawesome/fontawesome-free/css/all.css\";\r\nimport { useNavigate } from 'react-router-dom'\r\nimport SignIn from \"./SignIn\";\r\n\r\nconst DELAY = .1 * 1000;\r\n\r\nfunction Nav() {\r\n    const [show, handleShow] = useState(false);\r\n    const [keywords, setKeywords] = useState(\"\")\r\n\r\n    const navigate = useNavigate()\r\n\r\n    // When scroll is a 100px (down in page) we add the navbar visibilty\r\n    // if not remove visibility on navbar\r\n\r\n    const eventListenerFunc = () => {\r\n        if (window.scrollY > 100) {\r\n            handleShow(true);\r\n        } else handleShow(false);\r\n    }\r\n\r\n    useEffect(() => {\r\n        window.addEventListener(\"scroll\", eventListenerFunc);\r\n\r\n        return () => {\r\n            window.removeEventListener(\"scroll\", eventListenerFunc);\r\n        };\r\n    }, []);\r\n\r\n    // handle responsive menu\r\n    const [menuOpen, setMenuOpen] = useState(false);\r\n    const toggleMenu = () => {\r\n        console.log('menu toggled...')\r\n        setMenuOpen(!menuOpen);\r\n    };\r\n\r\n    function handleMouseEnter(){\r\n        clearTimeout(timer)\r\n    }\r\n\r\n    const [timer, setTimer] = useState()\r\n\r\n    function handleMouseLeave(){\r\n        clearTimeout(timer)\r\n        const leave = setTimeout(()=>{\r\n            setMenuOpen(false);\r\n        }, DELAY)\r\n        setTimer(leave)\r\n    }\r\n\r\n    function handleInput(event) {\r\n        setKeywords(event.target.value)\r\n    }\r\n\r\n    function handleClick() {\r\n        navigate(`/search`, { state: keywords })\r\n    }\r\n\r\n    function handleClickHome() {\r\n        console.log('clicked')\r\n        navigate(`/`, { state: keywords })\r\n\r\n    }\r\n\r\n    function handleClickCollections() {\r\n        console.log('clicked')\r\n        navigate(`/recommendations`, { state: keywords })\r\n\r\n    }\r\n\r\n    const [toggleTimer, setToggleTimer] = useState();\r\n\r\n    function handleMouseEnterOnToggle(){\r\n        const toggleTimer = setTimeout(() => {\r\n            setMenuOpen(true)\r\n        }, DELAY)\r\n        setToggleTimer(toggleTimer)\r\n    }\r\n\r\n    function handleMouseLeaveOnToggle(){\r\n        clearTimeout(toggleTimer)\r\n    }\r\n\r\n    return (\r\n        <div className={`nav ${show && \"nav__black\"}`}>\r\n            <img\r\n                className=\"nav__logo\"\r\n                src=\"/logo/red-transparent.webp\"\r\n                alt=\"\"\r\n            />\r\n\r\n            <div id='nav_menu' className={`nav__menu ${menuOpen ? 'open' : ''}`} onMouseEnter={handleMouseEnter} onMouseLeave={handleMouseLeave}>\r\n                <div className=\"home__button\" onClick={handleClickHome}>Home</div>\r\n                <div className=\"collections__button\" onClick={handleClickCollections}>Recommendations</div>\r\n            </div>\r\n            \r\n            <div className={`navbar-toggle ${menuOpen ? 'open' : ''}`} onClick={toggleMenu} onMouseEnter={handleMouseEnterOnToggle} onMouseLeave={handleMouseLeaveOnToggle}>\r\n                <div className=\"icon-bar\"></div>\r\n                <div className=\"icon-bar\"></div>\r\n                <div className=\"icon-bar\"></div>\r\n            </div>\r\n\r\n\r\n\r\n\r\n            <div className=\"search__wrap\">\r\n                <div className=\"search\">\r\n                    <input type=\"text\" className=\"search__term\" placeholder=\"What are you looking for?\"\r\n                        onChange={handleInput} onFocus={(e) => {e.target.placeholder=\"\"}}\r\n                        onBlur={(e) => {e.target.placeholder=\"What are you looking for?\"}}\r\n                    />\r\n                    <button type=\"submit\" onClick={handleClick} className=\"search__button\" aria-label=\"search keywords\">\r\n                        <i className=\"fa fa-search\"></i>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <SignIn />\r\n\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\nexport default Nav;\r\n","import React, { useEffect, useState } from 'react'\r\nimport '../../styles/SearchPage/Search.css'\r\nimport axios from '../../utils/axios'\r\nimport Poster from '../Poster/Poster';\r\nimport { useLocation } from 'react-router-dom';\r\n\r\nexport default function Search() {\r\n    const [books, setBooks] = useState([]);\r\n    const location = useLocation()\r\n\r\n    useEffect(() => {\r\n        async function fetchEBooks() {\r\n            if (!location.state){\r\n                console.log(location.state)\r\n                return\r\n            }\r\n            const keywords = location.state\r\n            const request = await axios.get(`query/search/?keywords=${keywords}`)\r\n            const ebooks = request.data.filter(ebook => ebook.coverImageURL)\r\n            setBooks(ebooks)\r\n        }\r\n        fetchEBooks()\r\n    }, [location.state])\r\n\r\n    return (\r\n        <>\r\n\r\n            <div className='search__page'>\r\n                <div className='transition'></div>\r\n                <h2 className='search__header'>Search Results...</h2>\r\n                <div className='search__results'>\r\n                    {\r\n                        books.map((ebook) => (\r\n                            <Poster key={ebook._id} ebook={ebook} />\r\n                        ))\r\n                    }\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n","import React, { createContext, useContext, useRef, useState } from 'react';\r\n\r\n// Create a MediaControlContext\r\nconst MediaControlContext = createContext();\r\n\r\n// Create a custom hook to use the MediaControlContext\r\nconst useMediaControlContext = () => {\r\n  const context = useContext(MediaControlContext);\r\n  if (!context) {\r\n    throw new Error('useMediaControlContext must be used within a MediaControlProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\n// Create a MediaControlProvider component\r\nconst MediaControlProvider = ({children}) => {\r\n  // Define the initial state\r\n  const initialMediaControlState = {\r\n    book: null,\r\n    index: 0,\r\n    isActive: false,\r\n    isPlaying: false,\r\n    volume: 50, // Default volume, you can set your own initial value\r\n    audioRef: useRef(null),\r\n  };\r\n\r\n  // Use state to manage the media control state\r\n  const [mediaControl, setMediaControl] = useState(initialMediaControlState);\r\n\r\n  // Define functions to update the media control state\r\n  const updateBook = (newBook) => setMediaControl((prev) => ({ ...prev, book: newBook }));\r\n  const updateIndex = (newIndex) => setMediaControl((prev) => ({ ...prev, index: newIndex }));\r\n  const updateIsActive = (newIsActive) => setMediaControl((prev) => ({ ...prev, isActive: newIsActive }));\r\n  const updateIsPlaying = (newIsPlaying) => setMediaControl((prev) => ({ ...prev, isPlaying: newIsPlaying }));\r\n  const updateVolume = (newVolume) => setMediaControl((prev) => ({ ...prev, volume: newVolume }));\r\n\r\n  const contextValue = {\r\n    mediaControl,\r\n    updateBook,\r\n    updateIndex,\r\n    updateIsActive,\r\n    updateIsPlaying,\r\n    updateVolume,\r\n  };\r\n\r\n  return (\r\n    <MediaControlContext.Provider value={contextValue}>\r\n      {children}\r\n    </MediaControlContext.Provider>\r\n  );\r\n};\r\n\r\nexport { MediaControlProvider, useMediaControlContext };\r\n","import { useQuery } from '@tanstack/react-query'\r\nimport React, { useState, useEffect, useContext } from 'react'\r\nimport { useLocation } from 'react-router-dom'\r\nimport Alternate from './Alternate'\r\nimport Cookies from 'js-cookie'\r\nimport axios from './../../utils/axios'\r\nimport { useMediaControlContext } from '../../context/Context'\r\n\r\nexport default function BigPoster() {\r\n    const location = useLocation()\r\n    const mediaContext = useMediaControlContext();\r\n    const [index, setIndex] = useState(0);\r\n\r\n    useEffect(()=>{\r\n        setIndex(0)\r\n    },[])\r\n\r\n    const handleBigPlay = () => {\r\n        if (!mediaContext.mediaControl.isActive) {\r\n            mediaContext.updateIsActive(true)\r\n        }\r\n\r\n        if (ebook == mediaContext.mediaControl.book) {\r\n            mediaContext.updateIsPlaying(!mediaContext.mediaControl.isPlaying)\r\n            mediaContext.updateIndex(mediaContext.mediaControl.index)\r\n        }\r\n        else {\r\n            mediaContext.updateBook(ebook)\r\n            mediaContext.updateIsPlaying(true)\r\n            mediaContext.updateIndex(0)\r\n        }\r\n\r\n        console.log('media control updated from BigPoster', ebook)\r\n    }\r\n\r\n    useEffect(() => {\r\n        setIndex(mediaContext.mediaControl.index)\r\n    }, [mediaContext.mediaControl.index])\r\n\r\n    const { data: { ebook }, isError, isLoading } = useQuery({\r\n        queryKey: [\"ebook\", location.state],\r\n        queryFn: () => {\r\n            return location.state\r\n        }\r\n    })\r\n\r\n    useEffect(() => {\r\n        async function record() {\r\n            console.log('email', Cookies.get('email'))\r\n            if (Cookies.get('email') != '') {\r\n                await axios.post(`/watched`, {\r\n                    email: Cookies.get('email'),\r\n                    ebook: { id: ebook._id, title: ebook.title }\r\n                })\r\n            }\r\n        }\r\n\r\n        record()\r\n    }, [ebook])\r\n\r\n    if (isError) {\r\n        return <Alternate parentClass={'left_wrapper'} />\r\n    }\r\n    if (isLoading) {\r\n        return <Alternate parentClass={'left__wrapper'} />\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className={`left__wrapper`}>\r\n                <img\r\n                    className={`audiobook__image`}\r\n                    src={ebook.coverImageURL}\r\n                    alt={ebook.title}\r\n                />\r\n            </div>\r\n            <div className='right__wrapper'>\r\n                <div className='section__title'>\r\n                    <h2>{ebook.sections[index]?.title}</h2>\r\n                </div>\r\n                <div className='big__play__wrapper'>\r\n                    <a className={`big__play__button ${mediaContext.mediaControl.isPlaying && mediaContext.mediaControl.book == ebook && 'playing'}`} onClick={handleBigPlay}>\r\n                        {(mediaContext.mediaControl.isPlaying && mediaContext.mediaControl.book == ebook) ? 'Pause' : 'Play'}\r\n                    </a>\r\n                </div>\r\n                <div className=\"audiobook__details\">\r\n\r\n                    <table className=\"audiobook__labels\">\r\n                        <tbody>\r\n\r\n                            <tr>\r\n                                <td>Authors:</td>\r\n                                <td>\r\n                                    {ebook.authors?.map((author, index) => (\r\n                                        <div key={index}>{author.first_name} {author.last_name}</div>\r\n                                    ))}\r\n                                </td>\r\n                            </tr>\r\n                            {ebook.language && (\r\n                                <tr>\r\n                                    <td>Language:</td>\r\n                                    <td>{ebook.language}</td>\r\n                                </tr>\r\n                            )}\r\n                            {ebook.totaltimesecs && (\r\n                                <tr>\r\n                                    <td>Duration:</td>\r\n                                    <td>\r\n                                        {(() => {\r\n                                            const secs = ebook.totaltimesecs;\r\n                                            const hours = Math.floor(secs / 3600);\r\n                                            const minutes = Math.floor((secs - hours * 3600) / 60);\r\n                                            return `${hours} hr ${minutes} mins`;\r\n                                        })()}\r\n                                    </td>\r\n                                </tr>\r\n                            )}\r\n                            <tr>\r\n                                <td>Genres:</td>\r\n                                <td>\r\n                                    {ebook.genres?.map((genre, index) => (\r\n                                        <div key={index}>{genre.name}</div>\r\n                                    ))}\r\n                                </td>\r\n                            </tr>\r\n                            {ebook.copyright_year && ebook.copyright_year !== \"0\" && (\r\n                                <tr>\r\n                                    <td>Copyright year:</td>\r\n                                    <td>{ebook.copyright_year}</td>\r\n                                </tr>\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n\r\n\r\n        </>\r\n    )\r\n}\r\n","import React, { useRef, useState, useEffect, useContext } from 'react';\r\nimport './../../styles/Audiobook/Player.css'; // Import your CSS file\r\nimport { IoPlaySkipForwardOutline, IoPlaySkipBackOutline, IoPlayForwardOutline, IoPlayBackOutline } from \"react-icons/io5\";\r\nimport { IconContext } from 'react-icons';\r\nimport { useMediaControlContext } from '../../context/Context';\r\n\r\nconst AudioPlayer = () => {\r\n    const mediaContext = useMediaControlContext();\r\n    const [audioElement, setAudioElement] = useState()\r\n\r\n    // change source when the book updates\r\n    useEffect(() => {\r\n        if (audioElement == null) return;\r\n        audioElement.pause()\r\n        audioElement.load()\r\n        audioElement.play()\r\n    }, [mediaContext.mediaControl.book])\r\n\r\n    useEffect(() => {\r\n        console.log('section changed', mediaContext)\r\n        if (audioElement == null) return;\r\n        audioElement.pause()\r\n        audioElement.load()\r\n        audioElement.play()\r\n    }, [mediaContext.mediaControl.index])\r\n\r\n\r\n    useEffect(() => {\r\n        const audioElement = mediaContext.mediaControl.audioRef.current\r\n        setAudioElement(audioElement)\r\n\r\n    }, [mediaContext.mediaControl.audioRef])\r\n\r\n    useEffect(() => {\r\n        console.log('is playing', mediaContext.mediaControl.isPlaying)\r\n        if (audioElement == null) return;\r\n        if (mediaContext.mediaControl.isPlaying) {\r\n            audioElement.play();\r\n        } else {\r\n            audioElement.pause();\r\n        }\r\n    }, [mediaContext.mediaControl.isPlaying])\r\n\r\n    const handleFastForward = () => {\r\n        audioElement.currentTime += 10;\r\n    };\r\n\r\n    const handleRewind = () => {\r\n        audioElement.currentTime -= 10;\r\n    };\r\n\r\n    const [currentTime, setCurrentTime] = useState(0);\r\n    const [duration, setDuration] = useState(1);\r\n\r\n    useEffect(() => {\r\n        if (audioElement == null) return;\r\n        const intervalId = setInterval(() => {\r\n            setCurrentTime(audioElement.currentTime);\r\n        }, 1000);\r\n\r\n        audioElement.onloadedmetadata = () => {\r\n            setDuration(audioElement.duration)\r\n        }\r\n\r\n        return () => {\r\n            clearInterval(intervalId);\r\n        };\r\n    }, [audioElement]);\r\n\r\n\r\n    return (\r\n\r\n        <div className=\"audio-player-container\">\r\n            <div className=\"progress-bar-container\">\r\n                <div\r\n                    className=\"progress-filled\"\r\n                    style={{ width: `${(currentTime / duration) * 100}%`}}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"audio-controls-wrapper\">\r\n                <span className=\"current-time\">{formatTime(currentTime)}</span>\r\n\r\n                <div className=\"audio-controls\">\r\n                    <IconContext.Provider value={{ size: \"2em\" }}>\r\n\r\n                        <span className='span-icon' onClick={handleRewind}>\r\n                            <IoPlayBackOutline className='control-button'/>\r\n                        </span>\r\n\r\n                        <span className='span-icon'>\r\n                            <IoPlaySkipBackOutline className='control-button'/>\r\n                        </span>\r\n\r\n                        <PlayPauseButton />\r\n\r\n                        <span className='span-icon'>\r\n                            <IoPlaySkipForwardOutline className='control-button'/>\r\n                        </span>\r\n                        <span className='span-icon' onClick={handleFastForward}>\r\n                            <IoPlayForwardOutline className='control-button'/>\r\n                        </span>\r\n\r\n                    </IconContext.Provider>\r\n\r\n\r\n                    <audio autoPlay ref={mediaContext.mediaControl.audioRef} >\r\n                        <source src={mediaContext.mediaControl.book.sections && mediaContext.mediaControl.book.sections[mediaContext.mediaControl.index]?.listen_url} type=\"audio/mp3\" className='section__source' />\r\n                    </audio>\r\n\r\n                </div >\r\n                <span className=\"total-time\">{formatTime(duration)}</span>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst PlayPauseButton = () => {\r\n    const mediaContext = useMediaControlContext();\r\n\r\n    return (\r\n        <div className=\"play-pause-wrapper\">\r\n            <label htmlFor=\"checkbox\" className=\"button-label\">\r\n                <div className={`playPauseIcon ${mediaContext.mediaControl.isPlaying ? 'pause' : 'play'}`}></div>\r\n            </label>\r\n            <input\r\n                type=\"checkbox\"\r\n                id=\"checkbox\"\r\n                onChange={() => {\r\n                    mediaContext.updateIsPlaying(!mediaContext.mediaControl.isPlaying)\r\n                }}\r\n                className=\"hidden-checkbox\"\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nconst formatTime = (time) => {\r\n    if (!time) return '00:00:00'\r\n    const hours = Math.floor(time / 3600)\r\n    const minutes = Math.floor(time / 60);\r\n    const seconds = Math.floor(time % 60);\r\n    return `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;\r\n};\r\n\r\nexport default AudioPlayer;\r\n","import React from 'react'\r\nimport { useMediaControlContext } from '../../context/Context';\r\n\r\nexport default function ({section, index, book}) {\r\n    const mediaContext = useMediaControlContext();\r\n\r\n    const changeSection = (index) => {\r\n        mediaContext.updateIndex(index)\r\n        mediaContext.updateIsPlaying(true)\r\n        mediaContext.updateBook(book)\r\n        mediaContext.updateIsActive(true)\r\n    }\r\n\r\n    return (\r\n        <div className={`audiobook__section ${index==mediaContext.mediaControl.index && 'selected'}`} key={index} onClick={() => changeSection(index)}>\r\n            <div className=\"audiobook__section__title\">{section.title}</div>\r\n            <div className=\"audiobook__section__duration\">{section.duration}</div>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\nimport '../../styles/Audiobook/Audiobook.css'\r\nimport BigPoster from '../Poster/BigPoster'\r\nimport { useLocation } from 'react-router-dom'\r\nimport parse from 'html-react-parser'\r\n// import Player from './Player'\r\n// import Player from './Player2.0'\r\nimport MediaPlayer from './MediaPlayer';\r\nimport { useQuery } from '@tanstack/react-query'\r\nimport axios from '../../utils/axios'\r\nimport Alternate from '../Poster/Alternate'\r\nimport Section from './Section'\r\n\r\nexport default function Audiobook() {\r\n    const location = useLocation()\r\n\r\n    const { data, isLoading, isError } = useQuery({\r\n        queryKey: ['ebook', location.state],\r\n        queryFn: fetchEBook\r\n    })\r\n\r\n    if (isLoading) {\r\n        return <Alternate parentClass={'audiobook__page'} message={'loading...'} />\r\n    }\r\n\r\n    if (isError) {\r\n        return <Alternate parentClass={'audiobook__page'} message={'Error...'} />\r\n    }\r\n\r\n\r\n\r\n    async function fetchEBook() {\r\n        console.log('location', location.state)\r\n        let { ebook, progress } = location.state\r\n        console.log(ebook, progress)\r\n        console.log('working...')\r\n        if (!ebook) {\r\n            window.history.back()\r\n        }\r\n        const response = await axios.get(`query/id?_id=${ebook._id}`)\r\n        ebook = response.data\r\n        return { ebook, progress }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"audiobook__page\">\r\n                <div className=\"transition\"></div>\r\n                <div className=\"audiobook\">\r\n                    <h2 className=\"audiobook__header\">{data.ebook.title}</h2>\r\n                    <div className='audiobook__wrapper'>\r\n                        <BigPoster />\r\n                    </div>\r\n                    <h2 className=\"description__header\">Chapters</h2>\r\n                    <div className='section__wrapper'>\r\n                        {\r\n\r\n                            data.ebook.sections.map((section, index) => {\r\n                                return <Section section={section} index={index} book={data.ebook} key={index}/>\r\n                            })\r\n                        }\r\n                    </div>\r\n\r\n\r\n                    <h2 className=\"description__header\">Description</h2>\r\n                    {data.ebook.description &&\r\n                        <div className=\"audiobook__description\">{parse(data.ebook.description)}</div>}\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n","import axios from \"axios\";\r\n\r\n// Function to create a request to the tmdb API\r\n// API fetching from themoviedb\r\nconst recommendation = axios.create({\r\n  baseURL: \"https://telltale-recommendation.onrender.com/\"\r\n})\r\n\r\n// Exporting instance object.Making it available\r\nexport default recommendation;\r\n","\r\nimport Poster from '../Poster/Poster';\r\nimport axios from '../../utils/axios'\r\nimport React from 'react'\r\nimport { useQuery } from '@tanstack/react-query';\r\nimport Alternate from '../Poster/Alternate';\r\nimport { LazyLoadComponent } from 'react-lazy-load-image-component';\r\nimport \"../../styles/Home/Row.css\"\r\n\r\nfunction Row({ title, url }) {\r\n  const { data: ebooks, isError, isLoading } = useQuery({\r\n    queryKey: [\"title\", url],\r\n    queryFn: fetchData\r\n  })\r\n\r\n  if (isError) {\r\n    return <Alternate parentClass={\"row__posters\"} message={\"Error...\"} />\r\n  }\r\n\r\n  if (isLoading) {\r\n    return <Alternate parentClass={\"row__posters\"} message={undefined} />\r\n  }\r\n\r\n  async function fetchData() {\r\n    const request = await axios.get(url);\r\n    let items = request.data\r\n    items = items.filter(item => item.coverImageURL)\r\n    // console.log(items)\r\n    return items\r\n  }\r\n  return (\r\n    <div className='row'>\r\n      <LazyLoadComponent>\r\n\r\n        <h2 className='row__title'>{title}</h2>\r\n        <div className=\"row__posters\">\r\n          {\r\n            ebooks.map((ebook) => (\r\n              <Poster key={ebook._id} ebook={ebook} />\r\n            ))\r\n          }\r\n        </div>\r\n      </LazyLoadComponent>\r\n\r\n    </div>\r\n\r\n  )\r\n}\r\n\r\nexport default Row","import '../../styles/Home/Row.css'\r\nimport axios from '../../utils/axios'\r\nimport recommendation from '../../utils/axiosRecommendation'\r\nimport Row from './Row'\r\nimport { useQuery } from '@tanstack/react-query'\r\nimport Alternate from '../Poster/Alternate'\r\nimport Cookies from 'js-cookie'\r\n\r\nconst NUM_OF_ROWS = 20\r\n\r\nexport default function Rows() {\r\n    const { data: recommendations, isError, isLoading } = useQuery({\r\n        queryKey: [Cookies.get('email')],\r\n        queryFn: fetchRecommendations\r\n    })\r\n\r\n    if (isError) {\r\n        return <Alternate parentClass=\"rows\" message={\"Error...\"} />\r\n    }\r\n    if (isLoading) {\r\n        console.log('recommendations loading...')\r\n        return <Alternate parentClass=\"rows\" message={\"Loading...\"} />\r\n    }\r\n\r\n    function shuffle(arr) {\r\n        for (let i = arr.length - 1; i > 0; i--) {\r\n            let j = Math.floor(Math.random() * (i + 1))\r\n            let tmp = arr[j];\r\n            arr[j] = arr[i]\r\n            arr[i] = tmp\r\n        }\r\n    }\r\n\r\n    async function fetchRecommendations() {\r\n        const email = Cookies.get('email')\r\n        if (email == '') {\r\n            return []\r\n        }\r\n\r\n\r\n        const response = await axios.get(`/query/prevWatched/?email=${email}`)\r\n        const watched = response.data\r\n        let watched_books = watched.map(book => ({id : book.id, title: book.title}))\r\n\r\n        shuffle(watched_books)\r\n\r\n        if (watched_books.length > NUM_OF_ROWS){\r\n            watched_books = watched_books.slice(0, NUM_OF_ROWS)\r\n        }\r\n\r\n        async function getRecommendations(id){\r\n            const response = await recommendation(`/?id=${id}`)\r\n            return response.data\r\n        }\r\n        console.log('watched books', watched_books)\r\n\r\n        const recommendations = await Promise.all(watched_books.map(\r\n            async (book) => {\r\n                return {title : book.title, recommendations: await getRecommendations(book.id)}\r\n            }\r\n        ))\r\n        console.log(\"recommendations\", recommendations)\r\n        return recommendations\r\n    }\r\n\r\n    console.log('recommendations loaded', recommendations.length)\r\n    return (\r\n        <div className='rows'>\r\n            {\r\n                Cookies.get('email') === '' && <Alternate parentClass=\"recommendations\" message={\"Please sign in to get recommendations...\"}/>\r\n            }\r\n            {\r\n                Cookies.get('email') !== '' && recommendations.length === 0 && <Alternate parentClass=\"recommendations\" message={\"Please listen to some audiobooks to get recommendations...\"} />\r\n            }\r\n            {recommendations.map((book, index) => {\r\n                return <Row key={index} title={`Because you listened to ${book.title}`} url={`/query/ids/?ids=[${book.recommendations}]`} />\r\n            }\r\n            )\r\n            }\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport Rows from './Rows'\r\n\r\nexport default function Home() {\r\n  return (\r\n    <div className='recommendations' style={{\"height\":\"100vh\"}}>\r\n        <div className='transition' style={{\"height\":\"90px\"}}></div>\r\n        <Rows />\r\n    </div>\r\n  )\r\n}\r\n","import React, { useState } from \"react\";\r\nimport \"./styles/App.css\";\r\nimport Home from \"./components/Home/Home\";\r\nimport Nav from \"./components/Navbar/Nav\";\r\nimport { Routes, Route } from \"react-router-dom\"\r\nimport Search from \"./components/SearchPage/Search\";\r\nimport Audiobook from \"./components/Audiobook/Audiobook\";\r\nimport Recommendation from \"./components/Recommendation/Recommendation\"\r\nimport { MediaControlProvider, useMediaControlContext } from \"./context/Context\";\r\nimport MediaPlayer from \"./components/Audiobook/MediaPlayer\";\r\n\r\n\r\n\r\nfunction Main() {\r\n  const mediaContext = useMediaControlContext();\r\n  return (\r\n    <div >\r\n      <Nav />\r\n      <Routes>\r\n        <Route path=\"/\" element={<Home />} />\r\n        <Route path=\"audiobook\" element={<Audiobook />} />\r\n        <Route path=\"search\" element={<Search />} />\r\n        <Route path=\"recommendations\" element={<Recommendation />} />\r\n      </Routes>\r\n      {mediaContext.mediaControl.isActive && < MediaPlayer />}\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"app\">\r\n      <MediaControlProvider>\r\n        <Main />\r\n      </MediaControlProvider>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './styles/index.css';\r\nimport App from './App';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\r\n\r\nconst REFETCH_INTERVAL = 1000 * 20  // 5 minutes\r\n\r\nconst queryClient = new QueryClient({\r\n  defaultOptions: {\r\n    queries: {\r\n      enabled: true,\r\n      refetchOnMount: false,\r\n      refetchOnWindowFocus: false,\r\n      refetchIntervalInBackground: REFETCH_INTERVAL,\r\n      refetchOnReconnect: false,\r\n      \r\n    }\r\n  }\r\n});\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <QueryClientProvider client={queryClient}>\r\n\r\n        <BrowserRouter>\r\n          <App />\r\n\r\n        </BrowserRouter>\r\n    </QueryClientProvider>\r\n\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\n"],"sourceRoot":""}