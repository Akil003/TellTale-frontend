(this.webpackJsonpnetflix_clone=this.webpackJsonpnetflix_clone||[]).push([[0],{102:function(e,t,n){},105:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){},117:function(e,t,n){},120:function(e,t,n){},121:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(46),s=n.n(c),o=(n(73),n(74),n(0)),i=n(12),u=n(38),l=n.n(u),j=l.a.create({baseURL:"https://telltale-backend-0tqm.onrender.com/"}),b=(n(94),n(95),n(123)),d=n(2);function O(e){var t=e.parentClass,n=e.message;return Object(d.jsx)("div",{className:t,children:Object(d.jsx)("div",{className:"alternate__container",children:Object(d.jsx)("div",{children:n})})})}var p=function(){var e,t,n=Object(b.a)({queryKey:["quote"],queryFn:function(){return r.apply(this,arguments)}});if(n.isError)return Object(d.jsx)(O,{parentClass:"banner",message:"Error..."});if(n.isLoading)return Object(d.jsx)(O,{parentClass:"banner",message:"Loading..."});function r(){return(r=Object(i.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.get("/query/quote");case 2:return t=e.sent,console.log(t.data),e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(d.jsxs)("header",{className:"banner",style:{backgroundSize:"cover",backgroundImage:"url(".concat("https://telltale-backend-0tqm.onrender.com/","query/banner)"),backgroundPosition:"center center",backgroundBlendMode:"difference"},children:[Object(d.jsxs)("div",{className:"banner__contents",children:[Object(d.jsx)("div",{className:"banner__buttons",children:Object(d.jsx)("button",{className:"banner__button",children:"My List"})}),Object(d.jsx)("h1",{className:"banner__description",children:(e=n.data.quote,t=250,(null===e||void 0===e?void 0:e.length)>t?e.substr(0,t-1)+"...":e)}),Object(d.jsxs)("h1",{className:"banner__title",children:["- ",n.data.author]})]}),Object(d.jsx)("div",{className:"banner--fadeBottom"})]})},f=n(14),h=n(6),m=(n(37),n(7)),x=n(31),v=(n(98),n(66)),g=Object(v.a)("https://klkotatsmplzawrxyuka.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imtsa290YXRzbXBsemF3cnh5dWthIiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODY5NDU3NjgsImV4cCI6MjAwMjUyMTc2OH0.Yo80PXvjszZQyBYA9mDo-M4mUjKXK4s1dsc9DVmHw24"),_=n(22),y=n.n(_);function k(e){var t=e.ebook,n=Object(m.n)(),r=function(){var e=Object(i.a)(Object(o.a)().mark((function e(){var n,r,a,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id,r=Math.floor(n/1e3),e.next=4,fetch("https://raw.githubusercontent.com/Akil003/TaleTell-static-files/main/".concat(r,"/").concat(n,".webp"));case 4:return a=e.sent,e.next=7,a.blob();case 7:return c=e.sent,e.abrupt("return",URL.createObjectURL(c));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=Object(b.a)(["image",t],r),c=a.data,s=a.isLoading,u=a.isError;function l(){return l=Object(i.a)(Object(o.a)().mark((function e(t){var r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.auth.getSession();case 2:r=e.sent,console.log("session",r.data),n("/audiobook",{state:{ebook:t,progress:{}.data}});case 6:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}return s||u?Object(d.jsx)(O,{parentClass:"row__poster"}):Object(d.jsxs)("div",{className:"row__poster",onClick:function(){return function(e){return l.apply(this,arguments)}(t)},children:[Object(d.jsx)(x.LazyLoadImage,{className:"poster__image",src:c,alt:t.title,effect:"blur"}),Object(d.jsxs)("div",{className:"poster__details",children:[Object(d.jsx)("div",{className:"poster__title",children:t.title}),Object(d.jsx)("table",{className:"poster__labels",children:Object(d.jsxs)("tbody",{children:[Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:"Authors:"}),Object(d.jsx)("td",{children:t.authors&&t.authors.map((function(e,t){return Object(d.jsxs)("div",{children:[e.first_name," ",e.last_name]},t)}))})]}),t.language&&Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:"Language:"}),Object(d.jsx)("td",{children:t.language})]}),t.totaltimesecs&&Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:"Duration:"}),Object(d.jsx)("td",{children:function(){var e=t.totaltimesecs,n=Math.floor(e/3600),r=Math.floor((e-3600*n)/60);return"".concat(n," hr ").concat(r," mins")}()})]}),Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:"Genres:"}),Object(d.jsx)("td",{children:t.genres&&t.genres.map((function(e,t){return Object(d.jsx)("div",{children:e.name},t)}))})]}),t.copyright_year&&Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:"Copyright year:"}),Object(d.jsx)("td",{children:t.copyright_year})]})]})})]})]})}var w=function(e){var t=e.title,n=e.url,r=Object(b.a)({queryKey:["title",n],queryFn:function(){return u.apply(this,arguments)}}),a=r.data,c=r.isError,s=r.isLoading;if(c)return Object(d.jsx)(O,{parentClass:"row__posters",message:"Error..."});if(s)return Object(d.jsx)(O,{parentClass:"row__posters",message:void 0});function u(){return(u=Object(i.a)(Object(o.a)().mark((function e(){var t,r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.get(n);case 2:return t=e.sent,r=(r=t.data).filter((function(e){return e.coverImageURL})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)(x.LazyLoadComponent,{children:[Object(d.jsx)("h2",{className:"row__title",children:t}),Object(d.jsx)("div",{className:"row__posters",children:a.map((function(e){return Object(d.jsx)(k,{ebook:e},e._id)}))})]})})},N=200;function L(){var e=Object(b.a)({queryKey:["titles"],queryFn:function(){return c.apply(this,arguments)}}),t=e.data,n=e.isError,r=e.isLoading;if(n)return Object(d.jsx)(O,{parentClass:"rows",message:"Error..."});if(r)return Object(d.jsx)(O,{parentClass:"rows",message:"Loading..."});function a(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[n];e[n]=e[t],e[t]=r}}function c(){return(c=Object(i.a)(Object(o.a)().mark((function e(){var t,n,r,c,s,i,u;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.get("/query/titles");case 2:return t=e.sent,n=t.data,r=n.authors,c=n.genres,s=n.languages,i=n.periods,r=r.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{type:"author"})})),c=c.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{type:"genre"})})),s=s.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{type:"language"})})),i=i.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{type:"period"})})),a(u=[].concat(Object(f.a)(r),Object(f.a)(c),Object(f.a)(s),Object(f.a)(i))),e.abrupt("return",u.slice(0,Math.min(N,u.length)));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(d.jsx)("div",{className:"rows",children:t.map((function(e,t){if("author"===e.type){var n="By ".concat(e._id.firstName," ").concat(e._id.lastName);return Object(d.jsx)(w,{title:n,url:"/query/author/?firstName=".concat(e._id.firstName,"&lastName=").concat(e._id.lastName)},t)}if("language"===e.type){var r="".concat(e._id," Audiobooks");return Object(d.jsx)(w,{title:r,url:"/query/language/?language=".concat(e._id)},t)}if("genre"===e.type){var a="".concat(e._id);return Object(d.jsx)(w,{title:a,url:"/query/genre/?genre=".concat(encodeURIComponent(e._id))},t)}var c;return"period"===e.type?(c="2000"!==e.from?"From ".concat(e.from," to ").concat(e.to):"".concat(e.from," onwards..."),Object(d.jsx)(w,{title:c,url:"/query/period/?from=".concat(e.from,"&to=").concat(e.to)},t)):Object(d.jsx)(d.Fragment,{})}))})}function C(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(p,{}),Object(d.jsx)(L,{})]})}var E=n(9);n(102),n(103),n(104),n(105);function q(e){return M.apply(this,arguments)}function M(){return(M=Object(i.a)(Object(o.a)().mark((function e(t){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.auth.signInWithOAuth({provider:"google"});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){var e=Object(r.useState)({}),t=Object(E.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!1),s=Object(E.a)(c,2),u=s[0],l=s[1];function j(){return b.apply(this,arguments)}function b(){return(b=Object(i.a)(Object(o.a)().mark((function e(){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(g);case 2:console.log("user",n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(i.a)(Object(o.a)().mark((function e(){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.auth.signOut();case 2:a({}),console.log("done..."),y.a.set("user","");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){function e(){return e=Object(i.a)(Object(o.a)().mark((function e(){var t,n,r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.auth.getSession();case 2:t=e.sent,n=t.data,r={},console.log(n),n.session&&(r=n.session.user.user_metadata),a(r),y.a.set("user",0===Object.keys(r).length?"":r.email);case 9:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"signin__wrapper",onMouseMove:function(){l(!0)},onMouseLeave:function(){l(!1)},children:[n&&0===Object.keys(n).length&&Object(d.jsx)("button",{id:"siginin__button",className:"signin__button",onClick:j,children:"Sign In"}),n&&Object.keys(n).length>0&&Object(d.jsxs)("div",{className:"signout__wrapper",children:[Object(d.jsx)("button",{className:"signin__profile",style:{backgroundImage:"url(".concat(n.picture,")")},onClick:j}),Object(d.jsx)("button",{className:"signout__button ".concat(u?"signout__visible":""),onClick:function(){return O.apply(this,arguments)},onMouseEnter:function(){l(!0)},onMouseLeave:function(){l(!1)},children:"Sign Out"})]})]})})}var S=function(){var e=Object(r.useState)(!1),t=Object(E.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(E.a)(c,2),o=s[0],i=s[1],u=Object(m.n)(),l=function(){window.scrollY>100?a(!0):a(!1)};Object(r.useEffect)((function(){return window.addEventListener("scroll",l),function(){window.removeEventListener("scroll",l)}}),[]);var j=Object(r.useState)(!1),b=Object(E.a)(j,2),O=b[0],p=b[1],f=Object(r.useState)(),h=Object(E.a)(f,2),x=h[0],v=h[1],g=Object(r.useState)(),_=Object(E.a)(g,2),y=_[0],k=_[1];return Object(d.jsxs)("div",{className:"nav ".concat(n&&"nav__black"),children:[Object(d.jsx)("img",{className:"nav__logo",src:"/logo/red-transparent.webp",alt:""}),Object(d.jsxs)("div",{id:"nav_menu",className:"nav__menu ".concat(O?"open":""),onMouseEnter:function(){clearTimeout(x)},onMouseLeave:function(){clearTimeout(x);var e=setTimeout((function(){p(!1)}),100);v(e)},children:[Object(d.jsx)("div",{className:"home__button",onClick:function(){console.log("clicked"),u("/",{state:o})},children:"Home"}),Object(d.jsx)("div",{className:"collections__button",onClick:function(){console.log("clicked"),u("/recommendations",{state:o})},children:"Recommendations"})]}),Object(d.jsxs)("div",{className:"navbar-toggle ".concat(O?"open":""),onClick:function(){console.log("menu toggled..."),p(!O)},onMouseEnter:function(){var e=setTimeout((function(){p(!0)}),100);k(e)},onMouseLeave:function(){clearTimeout(y)},children:[Object(d.jsx)("div",{className:"icon-bar"}),Object(d.jsx)("div",{className:"icon-bar"}),Object(d.jsx)("div",{className:"icon-bar"})]}),Object(d.jsx)("div",{className:"search__wrap",children:Object(d.jsxs)("div",{className:"search",children:[Object(d.jsx)("input",{type:"text",className:"search__term",placeholder:"What are you looking for?",onChange:function(e){i(e.target.value)},onFocus:function(e){e.target.placeholder=""},onBlur:function(e){e.target.placeholder="What are you looking for?"}}),Object(d.jsx)("button",{type:"submit",onClick:function(){u("/search",{state:o})},className:"search__button","aria-label":"search keywords",children:Object(d.jsx)("i",{className:"fa fa-search"})})]})}),Object(d.jsx)(I,{})]})};n(106);function F(){var e=Object(r.useState)([]),t=Object(E.a)(e,2),n=t[0],a=t[1],c=Object(m.l)();return Object(r.useEffect)((function(){function e(){return(e=Object(i.a)(Object(o.a)().mark((function e(){var t,n,r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.state){e.next=3;break}return console.log(c.state),e.abrupt("return");case 3:return t=c.state,e.next=6,j.get("query/search/?keywords=".concat(t));case 6:n=e.sent,r=n.data.filter((function(e){return e.coverImageURL})),a(r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[c.state]),Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"search__page",children:[Object(d.jsx)("div",{className:"transition"}),Object(d.jsx)("h2",{className:"search__header",children:"Search Results..."}),Object(d.jsx)("div",{className:"search__results",children:n.map((function(e){return Object(d.jsx)(k,{ebook:e},e._id)}))})]})})}n(107);function R(){var e,t,n=Object(m.l)(),a=Object(b.a)({queryKey:["ebook",n.state],queryFn:function(){return n.state}}),c=a.data.ebook,s=a.isError,u=a.isLoading;return Object(r.useEffect)((function(){function e(){return(e=Object(i.a)(Object(o.a)().mark((function e(){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("email",y.a.get("email")),""==y.a.get("email")){e.next=4;break}return e.next=4,j.post("/watched",{email:y.a.get("email"),ebook:{id:c._id,title:c.title}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[c]),s?Object(d.jsx)(O,{parentClass:"left_wrapper"}):u?Object(d.jsx)(O,{parentClass:"left__wrapper"}):Object(d.jsxs)("div",{className:"left__wrapper",children:[Object(d.jsx)("img",{className:"audiobook__image",src:c.coverImageURL,alt:c.title}),Object(d.jsx)("div",{className:"audiobook__details",children:Object(d.jsx)("table",{className:"audiobook__labels",children:Object(d.jsxs)("tbody",{children:[Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:"Authors:"}),Object(d.jsx)("td",{children:null===(e=c.authors)||void 0===e?void 0:e.map((function(e,t){return Object(d.jsxs)("div",{children:[e.first_name," ",e.last_name]},t)}))})]}),c.language&&Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:"Language:"}),Object(d.jsx)("td",{children:c.language})]}),c.totaltimesecs&&Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:"Duration:"}),Object(d.jsx)("td",{children:function(){var e=c.totaltimesecs,t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60);return"".concat(t," hr ").concat(n," mins")}()})]}),Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:"Genres:"}),Object(d.jsx)("td",{children:null===(t=c.genres)||void 0===t?void 0:t.map((function(e,t){return Object(d.jsx)("div",{children:e.name},t)}))})]}),c.copyright_year&&"0"!==c.copyright_year&&Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{children:"Copyright year:"}),Object(d.jsx)("td",{children:c.copyright_year})]})]})})})]})}var A=n(61),T=(n(117),n(65)),D=n.n(T),U=n(34),z=n(33);n(120);function B(e){var t=e.volume;return Object(d.jsxs)("div",{className:"volume",children:[Object(d.jsx)(U.a,{icon:z.d,size:"3x"}),"\xa0\xa0 ",Object(d.jsxs)("div",{children:[t," %"]})]})}function J(e){var t,n,a,c,s=e.ebook,o=Object(r.useState)(0),i=Object(E.a)(o,2),u=i[0],l=i[1],j=Object(r.useState)(0),b=Object(E.a)(j,2),O=b[0],p=b[1],f=Object(r.useState)(!1),h=Object(E.a)(f,2),m=h[0],x=h[1],v=Object(r.useRef)();Object(r.useEffect)((function(){})),Object(r.useEffect)((function(){if(console.log(s),u){var e=v.current;e&&(e.load(),e.play())}}),[u]);var g=Object(r.useState)(null),_=Object(E.a)(g,2),y=_[0],k=_[1],w=Object(r.useState)(null),N=Object(E.a)(w,2),L=N[0],C=N[1];return Object(r.useEffect)((function(){var e=function(e){"ArrowRight"===e.key?(e.preventDefault(),t("ArrowRight")):"ArrowLeft"===e.key&&(e.preventDefault(),t("ArrowLeft"))},t=function(e){y===e?(clearTimeout(L),k(null),C(null),n()):(k(e),C(setTimeout((function(){k(null),C(null),"ArrowRight"===e?r():"ArrowLeft"===e&&a()}),400)))},n=function(){l((function(e){return e+1}))},r=function(){var e=v.current.currentTime,t=v.current.duration,n=e+10;v.current.currentTime=n<t?n:t},a=function(){var e=v.current.currentTime-10;v.current.currentTime=e>0?e:0};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[u,y,L]),Object(r.useEffect)((function(){var e=function(e){" "===e.key&&(e.preventDefault(),t());var a,c=!1;"ArrowUp"===e.key?(e.preventDefault(),a=n(),c=!0):"ArrowDown"===e.key&&(e.preventDefault(),a=r(),c=!0),c&&(c=!1,p(a),x(!0),setTimeout((function(){x(!1)}),2e3))},t=function(){v.current.paused?v.current.play():v.current.pause()},n=function(){return v.current.volume<1?(v.current.volume+=.1,v.current.volume):1},r=function(){return v.current.volume>0?(v.current.volume-=.1,v.current.volume):0};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]),Object(d.jsxs)("div",{className:"right__wrapper",children:[m&&Object(d.jsx)(B,{volume:Math.floor(100*Number(O))}),Object(d.jsxs)("div",{className:"section__header",children:[Number(u)+1,". ",s.sections&&(null===(t=s.sections[u])||void 0===t?void 0:t.title)]}),s.sections&&(null===(n=s.sections[u])||void 0===n?void 0:n.readers)&&Object(d.jsxs)("div",{className:"audio__reader",children:[" ",Object(d.jsx)(U.a,{icon:z.c})," \xa0",s.sections[u].readers[0].display_name]}),Object(d.jsx)("div",{className:"audio__wrapper",children:Object(d.jsx)("audio",{autoPlay:!0,ref:v,className:"audio__player",controls:!0,children:Object(d.jsx)("source",{src:s.sections&&(null===(a=s.sections[u])||void 0===a?void 0:a.listen_url),type:"audio/mp3",className:"section__source"})})}),Object(d.jsx)(D.a,{onPageChange:function(e){l(e.selected)},breakLabel:"...",pageCount:null===s||void 0===s||null===(c=s.sections)||void 0===c?void 0:c.length,previousLabel:Object(d.jsx)(U.a,{icon:z.a}),nextLabel:Object(d.jsx)(U.a,{icon:z.b}),pageRangeDisplayed:2,renderOnZeroPageCount:null,containerClassName:"pagination__container",activeClassName:"pagination__active",pageClassName:"pagination__page",previousClassName:"pagination__previous",nextClassName:"pagination__next",breakClassName:"pagination__break",pageLinkClassName:"pagination__page-link"})]})}function K(){var e=Object(m.l)(),t=Object(b.a)({queryKey:["ebook",e.state],queryFn:function(){return c.apply(this,arguments)}}),n=t.data,r=t.isLoading,a=t.isError;if(r)return Object(d.jsx)(O,{parentClass:"audiobook__page",message:"loading..."});if(a)return Object(d.jsx)(O,{parentClass:"audiobook__page",message:"Error..."});function c(){return(c=Object(i.a)(Object(o.a)().mark((function t(){var n,r,a,c;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("location",e.state),n=e.state,r=n.ebook,a=n.progress,console.log(r,a),console.log("working..."),r||window.history.back(),t.next=7,j.get("query/id?_id=".concat(r._id));case 7:return c=t.sent,r=c.data,t.abrupt("return",{ebook:r,progress:a});case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"audiobook__page",children:[Object(d.jsx)("div",{className:"transition"}),Object(d.jsxs)("div",{className:"audiobook",children:[Object(d.jsx)("h2",{className:"audiobook__header",children:n.ebook.title}),Object(d.jsxs)("div",{className:"audiobook__wrapper",children:[Object(d.jsx)(R,{}),Object(d.jsx)(J,{ebook:n.ebook,progress:n.progress})]}),Object(d.jsx)("h2",{className:"description__header",children:"Description"}),n.ebook.description&&Object(d.jsx)("div",{className:"audiobook__description",children:Object(A.a)(n.ebook.description)})]})]})})}var X=l.a.create({baseURL:"https://telltale-recommendation.onrender.com/"});var Y=function(e){var t=e.title,n=e.url,r=Object(b.a)({queryKey:["title",n],queryFn:function(){return u.apply(this,arguments)}}),a=r.data,c=r.isError,s=r.isLoading;if(c)return Object(d.jsx)(O,{parentClass:"row__posters",message:"Error..."});if(s)return Object(d.jsx)(O,{parentClass:"row__posters",message:void 0});function u(){return(u=Object(i.a)(Object(o.a)().mark((function e(){var t,r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.get(n);case 2:return t=e.sent,r=(r=t.data).filter((function(e){return e.coverImageURL})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)(x.LazyLoadComponent,{children:[Object(d.jsx)("h2",{className:"row__title",children:t}),Object(d.jsx)("div",{className:"row__posters",children:a.map((function(e){return Object(d.jsx)(k,{ebook:e},e._id)}))})]})})};function P(){var e=Object(b.a)({queryKey:["titles"],queryFn:function(){return c.apply(this,arguments)}}),t=e.data,n=e.isError,r=e.isLoading;if(n)return Object(d.jsx)(O,{parentClass:"rows",message:"Error..."});if(r)return Object(d.jsx)(O,{parentClass:"rows",message:"Loading..."});function a(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[n];e[n]=e[t],e[t]=r}}function c(){return c=Object(i.a)(Object(o.a)().mark((function e(){var t,n,r,c,s,u,l;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(){return u=Object(i.a)(Object(o.a)().mark((function e(t){var n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X("/?id=".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)},s=function(e){return u.apply(this,arguments)},""!=(t=y.a.get("email"))){e.next=5;break}return e.abrupt("return",[]);case 5:return e.next=7,j.get("/query/prevWatched/?email=".concat(t));case 7:return n=e.sent,r=n.data,a(c=r.map((function(e){return{id:e.id,title:e.title}}))),l=c.map((function(e){return{title:e.title,recommendations:s(e.id)}})),e.abrupt("return",l);case 13:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}return Object(d.jsxs)("div",{className:"rows",children:[0==t.length&&Object(d.jsx)(O,{parentClass:"rows",message:"Please Sign in to get recommendations..."}),t.map((function(e,t){return Object(d.jsx)(Y,{title:"Because you watched ".concat(e.title),url:"/query/ids/?ids=".concat(e.recommendations)},t)}))]})}function W(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(P,{})})}function Z(){return Object(d.jsxs)("div",{children:[Object(d.jsx)(S,{}),Object(d.jsxs)(m.c,{children:[Object(d.jsx)(m.a,{path:"/",element:Object(d.jsx)(C,{})}),Object(d.jsx)(m.a,{path:"audiobook",element:Object(d.jsx)(K,{})}),Object(d.jsx)(m.a,{path:"search",element:Object(d.jsx)(F,{})}),Object(d.jsx)(m.a,{path:"recommendations",elements:Object(d.jsx)(W,{})})]})]})}var G=function(){return Object(d.jsx)("div",{className:"app",children:Object(d.jsx)(m.c,{children:Object(d.jsx)(m.a,{exact:!0,path:"/*",element:Object(d.jsx)(Z,{})})})})},H=n(20),V=n(124),Q=n(58),$=new V.a({defaultOptions:{queries:{enabled:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchIntervalInBackground:2e4,refetchOnReconnect:!1}}});s.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(Q.a,{client:$,children:Object(d.jsx)(H.a,{children:Object(d.jsx)(G,{})})})}),document.getElementById("root"))},37:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},98:function(e,t,n){}},[[121,1,2]]]);
//# sourceMappingURL=main.7ea83634.chunk.js.map